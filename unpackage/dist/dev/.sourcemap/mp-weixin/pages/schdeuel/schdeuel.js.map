{"version":3,"sources":["uni-app:///main.js","webpack:///D:/XM/uniapp/suaffair/pages/schdeuel/schdeuel.vue?b61a","webpack:///D:/XM/uniapp/suaffair/pages/schdeuel/schdeuel.vue?129e","webpack:///D:/XM/uniapp/suaffair/pages/schdeuel/schdeuel.vue?9f70","webpack:///D:/XM/uniapp/suaffair/pages/schdeuel/schdeuel.vue?3649","uni-app:///pages/schdeuel/schdeuel.vue","webpack:///D:/XM/uniapp/suaffair/pages/schdeuel/schdeuel.vue?412c"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","g0","_self","_c","dates","split","l0","__map","weeks","w","index","$orig","__get_orig","m0","l2","a","i","l1","courses","course","m1","isNaN","m2","m3","_isMounted","e0","$event","showtip","e1","showpoint","e2","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":"oIAAA,KAE2D,KAC3D,YACA,W,mDAFAA,GAAGC,kCAAoCC,EAGvCC,EAAWC,a,+DCLX,sHACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,8BACZ,aAAAF,E,yCCvBf,sQ,gCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,MAAM,GAAGC,MAAM,MAExBC,EAAKT,EAAIU,MAAMV,EAAIW,OAAO,SAASC,EAAGC,GACxC,IAAIC,EAAQd,EAAIe,WAAWH,GAEvBI,EAAKhB,EAAIO,MAAMM,EAAQ,GAC3B,MAAO,CACLC,MAAOA,EACPE,GAAIA,MAIJC,EAAKjB,EAAIU,MAAM,GAAG,SAASQ,EAAGC,GAChC,IAAIL,EAAQd,EAAIe,WAAWG,GAEvBE,EAAKpB,EAAIU,MAAMV,EAAIqB,SAAS,SAASC,EAAQT,GAC/C,IAAIC,EAAQd,EAAIe,WAAWO,GAEvBC,EAAKC,MAAMF,EAAO,GAAG,IACrBG,EAAKD,MAAMF,EAAO,GAAG,IACrBI,EAAKF,MAAMF,EAAO,GAAG,MAAQA,EAAO,GAAG,GAC3C,MAAO,CACLR,MAAOA,EACPS,GAAIA,EACJE,GAAIA,EACJC,GAAIA,MAIR,MAAO,CACLZ,MAAOA,EACPM,GAAIA,MAIHpB,EAAI2B,aACP3B,EAAI4B,GAAK,SAASC,GAChB7B,EAAI8B,SAAW9B,EAAI8B,SAGrB9B,EAAI+B,GAAK,SAASF,GAChB7B,EAAIgC,WAAahC,EAAIgC,WAGvBhC,EAAIiC,GAAK,SAASJ,GAChB7B,EAAI8B,SAAU,IAIlB9B,EAAIkC,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLlC,GAAIA,EACJK,GAAIA,EACJQ,GAAIA,MAKRsB,GAAmB,EACnBC,EAAkB,GACtBzC,EAAO0C,eAAgB,G,gCCnEvB,6GAAwpB,eAAG,G,m3DCwI3pB,E,EAJA,Q,EAAA,S,EACA,Q,EAAA,OACA,eACA,2B,EAEA,CACA,KADA,WAEA,OACA,aACA,WACA,UACA,OACA,UACA,WACA,SACA,2CACA,YACA,gGACA,WACA,iBAGA,WACA,QAlBA,WAmBA,eACA,mBACA,OACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAEA,uCACA,0BAEA,qCAEA,SACA,WADA,WAEA,gCAEA,UAJA,SAIA,GACA,aACA,gDACA,YACA,iBAGA,KAXA,SAWA,GACA,eACA,oBACA,qCAEA,sCAGA,eACA,kCACA,qCAEA,sCAGA,+BAEA,SA5BA,SA4BA,GAEA,aAEA,QAhCA,WAiCA,+BACA,YACA,0EACA,oBADA,EACA,IADA,cAEA,8BAGA,2DACA,YACA,KAEA,MA5CA,SA4CA,GACA,eACA,aACA,mCACA,IACA,sBACA,MACA,uBAEA,kBACA,aAGA,QAzDA,WA0DA,IADA,EACA,yBACA,IAFA,IAGA,cAHA,IAGA,0CACA,gCACA,+BAEA,iBACA,oDACA,KACA,YACA,QAXA,8BAeA,gBACA,gBAEA,SA3EA,WA2EA,WACA,cACA,gBACA,gBACA,MACA,eAEA,oBACA,eACA,WACA,2BACA,aACA,aAEA,iBAIA,QA7FA,WA6FA,WAEA,eACA,QACA,oBAEA,GADA,eACA,0BACA,yBACA,6BAKA,YAJA,aACA,uBACA,cAKA,eACA,iBAEA,iBACA,MACA,WACA,8IACA,4BADA,SAGA,cACA,wBACA,sCACA,6BACA,eACA,WACA,yBATA,OAGA,EAHA,OAaA,WACA,sBACA,2CACA,QACA,iBAEA,kBACA,SACA,gBACA,gBACA,MACA,eAEA,oBACA,kBAIA,iBACA,2BACA,iBACA,aACA,aACA,kBApCA,2GA+CA,WAlKA,WAmKA,aACA,aACA,2BACA,oBACA,WACA,cACA,iC,0FClWA,6GAAuvC,eAAG,G","file":"pages/schdeuel/schdeuel.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/schdeuel/schdeuel.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./schdeuel.vue?vue&type=template&id=e06c2434&scoped=true&\"\nvar renderjs\nimport script from \"./schdeuel.vue?vue&type=script&lang=js&\"\nexport * from \"./schdeuel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./schdeuel.vue?vue&type=style&index=0&id=e06c2434&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e06c2434\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/schdeuel/schdeuel.vue\"\nexport default component.exports","export * from \"-!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./schdeuel.vue?vue&type=template&id=e06c2434&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.dates(1).split(\"/\")\n\n  var l0 = _vm.__map(_vm.weeks, function(w, index) {\n    var $orig = _vm.__get_orig(w)\n\n    var m0 = _vm.dates(index + 1)\n    return {\n      $orig: $orig,\n      m0: m0\n    }\n  })\n\n  var l2 = _vm.__map(3, function(a, i) {\n    var $orig = _vm.__get_orig(a)\n\n    var l1 = _vm.__map(_vm.courses, function(course, index) {\n      var $orig = _vm.__get_orig(course)\n\n      var m1 = isNaN(course[5][0])\n      var m2 = isNaN(course[5][0])\n      var m3 = isNaN(course[5][0]) || !course[5][1]\n      return {\n        $orig: $orig,\n        m1: m1,\n        m2: m2,\n        m3: m3\n      }\n    })\n\n    return {\n      $orig: $orig,\n      l1: l1\n    }\n  })\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.showtip = !_vm.showtip\n    }\n\n    _vm.e1 = function($event) {\n      _vm.showpoint = !_vm.showpoint\n    }\n\n    _vm.e2 = function($event) {\n      _vm.showtip = false\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n        l2: l2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./schdeuel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./schdeuel.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"wai\">\r\n\t\t<!-- 自定义导航 -->\r\n\t\t<view style=\"height: 100rpx;\"></view>\r\n\t\t<view class=\"navbar\">\r\n\t\t\t<view class=\"popup\" @click=\"showtip = !showtip\"><van-icon name=\"more-o\" size=\"23\" /></view>\r\n\t\t\t<view class=\"middel\" @click=\"showpoint = !showpoint\">\r\n\t\t\t\t<text>第 {{ week }} 周</text>\r\n\t\t\t\t<van-icon name=\"arrow-down\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 弹出 -->\r\n\t\t<view v-if=\"loading\" class=\"loading\">\r\n\t\t\t<van-loading color=\"#1989fa\" size=\"24px\">从教务系统获取数据中...</van-loading>\r\n\t\t</view>\r\n\t\t<van-popup :show=\"showtip\" position=\"top\" custom-style=\"height: 30%;\" @close=\"showtip = false\">\r\n\t\t\t<view class=\"pop_title\">宿院速办</view>\r\n\t\t\t<view class=\"pop_list\">\r\n\t\t\t\t<view class=\"pop_list_item\" @click=\"getCourse()\">\r\n\t\t\t\t\t<van-icon name=\"replay\" size=\"33\" />\r\n\t\t\t\t\t<text>刷新数据</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"pop_list_item\" @click=\"upimage()\">\r\n\t\t\t\t\t<van-icon name=\"photo-o\" size=\"33\" />\r\n\t\t\t\t\t<text>自定义背景</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"pop_list_item\" @click=\"clearimg()\">\r\n\t\t\t\t\t<van-icon name=\"close\" size=\"33\" />\r\n\t\t\t\t\t<text>删除背景</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</van-popup>\r\n\r\n\t\t<!-- 课表小点点 -->\r\n\t\t<view class=\"main\" :style=\"{ backgroundImage: 'url(' + bgimg + ')' }\">\r\n\t\t\t<scroll-view\r\n\t\t\t\t:show-scrollbar=\"false\"\r\n\t\t\t\tscroll-with-animation\r\n\t\t\t\tscroll-x\r\n\t\t\t\tv-show=\"showpoint\"\r\n\t\t\t\t:scroll-into-view=\"`i${week}`\"\r\n\t\t\t\tstyle=\" white-space: nowrap;\"\r\n\t\t\t>\r\n\t\t\t\t<view :id=\"`i${b + 3}`\" @click=\"on_point(b + 1)\" class=\"point_item\" v-for=\"(a, b) of 20\" :key=\"b\">\r\n\t\t\t\t\t<view class=\"point_wai\" :style=\"{ backgroundColor: b + 1 == week ? 'rgb(188,187,193)' : '' }\">\r\n\t\t\t\t\t\t<text>第{{ b + 1 }}周</text>\r\n\t\t\t\t\t\t<view class=\"point\">\r\n\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\tclass=\"mipot\"\r\n\t\t\t\t\t\t\t\tv-for=\"(c, d) of pointArr\"\r\n\t\t\t\t\t\t\t\t:key=\"d\"\r\n\t\t\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\t\t\tbackgroundColor:\r\n\t\t\t\t\t\t\t\t\t\t((c[0][0] <= b + 1 && b + 1 <= c[0][1]) ||\r\n\t\t\t\t\t\t\t\t\t\t\t(c[0][2] <= b + 1 && b + 1 <= c[0][3])) &&\r\n\t\t\t\t\t\t\t\t\t\t(!c[2] || c[2] % 2 == (b + 1) % 2) &&\r\n\t\t\t\t\t\t\t\t\t\tc[1] == 2\r\n\t\t\t\t\t\t\t\t\t\t\t? 'rgb(56,201,153)'\r\n\t\t\t\t\t\t\t\t\t\t\t: ((c[0][0] <= b + 1 && b + 1 <= c[0][1]) ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t(c[0][2] <= b + 1 && b + 1 <= c[0][3])) &&\r\n\t\t\t\t\t\t\t\t\t\t\t  (!c[2] || c[2] % 2 == (b + 1) % 2) &&\r\n\t\t\t\t\t\t\t\t\t\t\t  c[1] == 1\r\n\t\t\t\t\t\t\t\t\t\t\t? '#76B1E4'\r\n\t\t\t\t\t\t\t\t\t\t\t: '#d4d4d4'\r\n\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\r\n\t\t\t<!-- 星期栏 week -->\r\n\t\t\t<view class=\"week\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<text>{{ dates(1).split('/')[0] }}</text>\r\n\t\t\t\t\t<text>月</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-for=\"(w, index) of weeks\" :key=\"index\" class=\"week_date\">\r\n\t\t\t\t\t<text>{{ w }}</text>\r\n\t\t\t\t\t<text style=\"color: #999999; font-size: 21rpx; \">{{ dates(index + 1) }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 课表 -->\r\n\t\t\t<swiper style=\"height: 95%; \" @change=\"move\" circular :current=\"current\">\r\n\t\t\t\t<swiper-item v-for=\"(a, i) of 3\" :key=\"i\">\r\n\t\t\t\t\t<view class=\"schedule\">\r\n\t\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t\t<view v-for=\"(item, index) of courseTime\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<text v-show=\"index != 4\" style=\"font-size: 25rpx;\">\r\n\t\t\t\t\t\t\t\t\t{{ index < 4 ? index + 1 : index }}\r\n\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t<text style=\"color: #999999;font-size: 17rpx;\">{{ item }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 主要课表 -->\r\n\t\t\t\t\t\t<view v-show=\"week <= delweek\" class=\"right\">\r\n\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\t@click=\"show_info(course)\"\r\n\t\t\t\t\t\t\t\tclass=\"sch_main\"\r\n\t\t\t\t\t\t\t\tv-for=\"(course, index) of courses\"\r\n\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\t\t\ttop: isNaN(course[5][0])\r\n\t\t\t\t\t\t\t\t\t\t? 4 * 9 + '%'\r\n\t\t\t\t\t\t\t\t\t\t: (course[5][0] < 4 ? course[5][0] - 1 : course[5][0]) * 9 + '%',\r\n\t\t\t\t\t\t\t\t\tleft: ((course[4] - 1) * 94) / 7 + '%',\r\n\t\t\t\t\t\t\t\t\theight: isNaN(course[5][0])?'9%':(course[5][1] - course[5][0] + 1) * 9 + '%'\r\n\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t\tv-show=\"\r\n\t\t\t\t\t\t\t\t\t((course[2][0] <= week && week <= course[2][1]) ||\r\n\t\t\t\t\t\t\t\t\t\t(course[2][2] <= week && week <= course[2][3])) &&\r\n\t\t\t\t\t\t\t\t\t\t(!course[3] || course[3] % 2 == week % 2)\r\n\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<view :style=\"{ backgroundColor: colorArrays[index % 20],alignItems: (isNaN(course[5][0])||!course[5][1])?'flex-start':'center' }\">\r\n\t\t\t\t\t\t\t\t\t<text style=\"margin: 2rpx;\">{{ course[0] }}@{{ course[6] }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view v-show=\"week > delweek && courses.length\" class=\"delweek\">\r\n\t\t\t\t\t\t\t\t<text>放假了，出去玩吧！</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nconst { nor_date } = require('../../static/js/time.js');\r\nconst { mixins } = require('../../static/js/mixin.js');\r\nconst db = uniCloud.database();\r\nlet user = uni.getStorageSync('user');\r\nlet gweek;\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tshowpoint: false,\r\n\t\t\tshowtip: false,\r\n\t\t\tcurrent: 0,\r\n\t\t\tweek: 0,\r\n\t\t\tdelweek: 0,\r\n\t\t\tcourses: [],\r\n\t\t\tbgimg: '',\r\n\t\t\tweeks: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],\r\n\t\t\tpointArr: [],\r\n\t\t\tcourseTime: ['8:05','9:00','10:05','11:00','中午','14:40','15:35','16:30','17:25','19:00','19:55'],\r\n\t\t\ttipShow: false,\r\n\t\t\tcolorArrays: []\r\n\t\t};\r\n\t},\r\n\tmixins: [mixins],\r\n\tmounted() {\r\n\t\tthis.getweek();\r\n\t\tthis.bgimg = user.bgimg;\r\n\t\tlet colorArr = [\r\n\t\t\t'#99CCFF',\r\n\t\t\t'#FFCC99',\r\n\t\t\t'#FFCCCC',\r\n\t\t\t'#CC6699',\r\n\t\t\t'#99CCCC',\r\n\t\t\t'#FF6666',\r\n\t\t\t'#CCCC66',\r\n\t\t\t'#66CC99',\r\n\t\t\t'#FF9966',\r\n\t\t\t'#66CCCC',\r\n\t\t\t'#6699CC',\r\n\t\t\t'#99CC99',\r\n\t\t\t'#669966',\r\n\t\t\t'#99CC99',\r\n\t\t\t'#99CCCC',\r\n\t\t\t'#66CCFF',\r\n\t\t\t'#CCCCFF',\r\n\t\t\t'#99CC66',\r\n\t\t\t'#CCCC99',\r\n\t\t\t'#FF9999'\r\n\t\t];\r\n\t\tthis.colorArrays = colorArr.sort(function(a, b) {\r\n\t\t\treturn 0.5 - Math.random();\r\n\t\t});\r\n\t\tif (this.courses.length) this.get_del();\r\n\t},\r\n\tmethods: {\r\n\t\tshow_point() {\r\n\t\t\tthis.showpoint = !this.showpoint;\r\n\t\t},\r\n\t\tshow_info(e) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: `教师：${e[1]}\\r\\n地点：${e[6]}`,\r\n\t\t\t\ticon: 'none',\r\n\t\t\t\tduration: 2800\r\n\t\t\t});\r\n\t\t},\r\n\t\tmove(e) {\r\n\t\t\tif (!this.current) {\r\n\t\t\t\tif (e.detail.current == 1) {\r\n\t\t\t\t\tthis.week < 20 ? this.week++ : (this.week = 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.week > 1 ? this.week-- : (this.week = 20);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.current) {\r\n\t\t\t\tif (e.detail.current - this.current == -1) {\r\n\t\t\t\t\tthis.week > 1 ? this.week-- : (this.week = 20);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.week < 20 ? this.week++ : (this.week = 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.current = e.detail.current;\r\n\t\t},\r\n\t\ton_point(e) {\r\n\t\t\t// console.log(this.week, e);\r\n\t\t\tthis.week = e;\r\n\t\t},\r\n\t\tgetweek() {\r\n\t\t\tlet time = uni.getStorageSync('time');\r\n\t\t\tif(!time.firstday){\r\n\t\t\t\tuniCloud.database().collection('newtime').limit(1).get().then(res=>{\r\n\t\t\t\t\tlet {_id,...time1} = res.result.data[0]\r\n\t\t\t\t\tuni.setStorageSync('time',time1)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tlet week = parseInt((new Date().getTime() - time.firstday) / (1000 * 60 * 60 * 24 * 7) + 1);\r\n\t\t\tthis.week = week;\r\n\t\t\tgweek = week;\r\n\t\t},\r\n\t\tdates(e) {\r\n\t\t\tlet date = new Date();\r\n\t\t\tlet xq = date.getDay();\r\n\t\t\tlet date1 = date.getTime() - (gweek - this.week) * (1000 * 60 * 60 * 24 * 7);\r\n\t\t\tif (e > xq) {\r\n\t\t\t\tdate1 += (e - xq) * 1000 * 60 * 60 * 24;\r\n\t\t\t} else if (e < xq) {\r\n\t\t\t\tdate1 += (xq - e) * 1000 * 60 * 60 * 24;\r\n\t\t\t}\r\n\t\t\tlet date2 = new Date(date1);\r\n\t\t\treturn nor_date(date2);\r\n\t\t},\r\n\r\n\t\tget_del() {\r\n\t\t\tlet pointArr = new Array(35).fill('');\r\n\t\t\tlet delweek = 0;\r\n\t\t\tfor (let c of this.courses) {\r\n\t\t\t\tif (delweek < parseInt(c[2].slice(-1)[0])) {\r\n\t\t\t\t\tdelweek = parseInt(c[2].slice(-1)[0]);\r\n\t\t\t\t}\r\n\t\t\t\tif (!isNaN(c[5][0])) {\r\n\t\t\t\t\tpointArr[(((c[5][0] % 2 == 0 ? c[5][0] - 1 : c[5][0]) - 1) / 2) * 7 + c[4] - 1] = [\r\n\t\t\t\t\t\tc[2],\r\n\t\t\t\t\t\tc[5].length,\r\n\t\t\t\t\t\tc[3]\r\n\t\t\t\t\t];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.pointArr = pointArr;\r\n\t\t\tthis.delweek = delweek;\r\n\t\t},\r\n\t\tclearimg() {\r\n\t\t\tthis.bgimg = '';\r\n\t\t\tuniCloud.callFunction({\r\n\t\t\t\tname: 'delbgimg',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tbgimg: user.bgimg\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tuser.bgimg = '';\r\n\t\t\t\t\tuni.setStorageSync('user', user);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '成功'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.showtip = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tupimage() {\r\n\t\t\t//前端代码\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tcount: 1,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tif (res.tempFilePaths.length > 0) {\r\n\t\t\t\t\t\tlet filePath = res.tempFilePaths[0];\r\n\t\t\t\t\t\tif (res.tempFiles[0].size > 5120000) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '只能上传大小为5m以下的哦~',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 图片压缩\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle:'上传中...',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tuni.compressImage({\r\n\t\t\t\t\t\t\tsrc: filePath,\r\n\t\t\t\t\t\t\tquality: 80,\r\n\t\t\t\t\t\t\tsuccess: async res => {\r\n\t\t\t\t\t\t\t\tconsole.log(res.tempFilePath);\r\n\t\t\t\t\t\t\t\t//进行上传操作\r\n\t\t\t\t\t\t\t\tconst result = await uniCloud.uploadFile({\r\n\t\t\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\t\t\tcloudPath: new Date().getTime() + '.jpg',\r\n\t\t\t\t\t\t\t\t\tonUploadProgress: function(progressEvent) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(progressEvent);\r\n\t\t\t\t\t\t\t\t\t\tvar percentCompleted = Math.round(\r\n\t\t\t\t\t\t\t\t\t\t\t(progressEvent.loaded * 100) / progressEvent.total\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (result.success) {\r\n\t\t\t\t\t\t\t\t\tdb.collection('users')\r\n\t\t\t\t\t\t\t\t\t\t.where({ openid: uni.getStorageSync('openid') })\r\n\t\t\t\t\t\t\t\t\t\t.update({\r\n\t\t\t\t\t\t\t\t\t\t\tbgimg: result.fileID\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (user.bgimg) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: 'delbgimg',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbgimg: user.bgimg\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tuser.bgimg = result.fileID;\r\n\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('user', user);\r\n\t\t\t\t\t\t\t\t\t\t\tthis.bgimg = result.fileID;\r\n\t\t\t\t\t\t\t\t\t\t\tthis.showtip = false;\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: '设置成功'\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tshow_login() {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '请先登录',\r\n\t\t\t\tcontent: '登录后我们才能获取到您的课表哦~',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// 下拉框方法\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wai {\r\n\theight: 100%;\r\n\tbackground-size: cover;\r\n}\r\n.main {\r\n\theight: 89%;\r\n\toverflow: hidden;\r\n\tbackground-size: cover;\r\n}\r\n.loading {\r\n\twidth: 100%;\r\n\tposition: fixed;\r\n\tbottom: 18%;\r\n\tz-index: 88;\r\n\ttext-align: center;\r\n}\r\n/* 自定义导航栏 */\r\n.navbar {\r\n\theight: 65rpx;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\twidth: 100%;\r\n\tfont-size: 28rpx;\r\n}\r\n.popup {\r\n\tposition: absolute;\r\n\tleft: 30rpx;\r\n\tmargin-bottom: 10rpx;\r\n\tz-index: 888;\r\n}\r\n.pop_title {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\tmargin-top: 108rpx;\r\n\tfont-size: 32rpx;\r\n\tletter-spacing: 2rpx;\r\n}\r\n.pop_list {\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\tpadding: 58rpx 28rpx;\r\n\t.pop_list_item {\r\n\t\theight: 138rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmargin-right: 50rpx;\r\n\t\tjustify-content: space-around;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n}\r\n\r\n/* 下拉小圆点 */\r\n\r\n.point_item {\r\n\tdisplay: inline-block;\r\n\twidth: 130rpx;\r\n\theight: 128rpx;\r\n\tpadding: 0 5rpx;\r\n\t.point_wai {\r\n\t\tdisplay: flex;\r\n\t\tpadding: 6rpx 0;\r\n\t\tborder-radius: 20rpx;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 25rpx;\r\n\t\ttext {\r\n\t\t\tmargin-bottom: 5rpx;\r\n\t\t}\r\n\t\t.point {\r\n\t\t\twidth: 105rpx;\r\n\t\t\theight: 75rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-flow: wrap;\r\n\t\t\tposition: relative;\r\n\t\t\t.mipot {\r\n\t\t\t\theight: 13rpx;\r\n\t\t\t\twidth: 13rpx;\r\n\t\t\t\tmargin: 1%;\r\n\t\t\t\tborder-radius: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/* 星期周几 */\r\n.week {\r\n\tdisplay: flex;\r\n\tfont-size: 24rpx;\r\n\theight: 5%;\r\n}\r\n\r\n.week_date {\r\n\twidth: calc(94% / 7);\r\n\theight: 100%;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n\r\n.week > view:first-child {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\twidth: 6%;\r\n\talign-items: center;\r\n}\r\n\r\n/* 整个课表 */\r\n.schedule {\r\n\tdisplay: flex;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground-size: cover;\r\n\t/* background-image: url(''); */\r\n}\r\n\r\n/* 课表背景图片 */\r\n.backimg {\r\n\tposition: absolute;\r\n\ttop: 200rpx;\r\n}\r\n\r\n/* 课表左侧 */\r\n.left {\r\n\twidth: 6%;\r\n\theight: 100%;\r\n}\r\n\r\n.left > view {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\theight: 9%;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tfont-size: 20rpx;\r\n}\r\n\r\n/* 课表右侧 */\r\n.right {\r\n\tdisplay: flex;\r\n\tflex-shrink: 0;\r\n\twidth: 100%;\r\n\tposition: relative;\r\n\tfont-weight: bolder;\r\n}\r\n\r\n.sch_main {\r\n\tposition: absolute;\r\n\twidth: 14%;\r\n\tcolor: white;\r\n\tfont-size: 23rpx;\r\n\tpadding: 2rpx 6rpx;\r\n\tword-break: break-word;\r\n\tbox-sizing: border-box;\r\n\toverflow: hidden;\r\n}\r\n.sch_main > view {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tborder-radius: 18rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n.delweek {\r\n\twidth: 100%;\r\n\tline-height: 600rpx;\r\n\ttext-align: center;\r\n\tfont-size: 50rpx;\r\n\tcolor: #76c26b;\r\n}\r\n.ce {\r\n\tbackground-image: url('https://ts3.cn.mm.bing.net/th?id=OIP-C.8olSEek1RZjSQDgPizhxEAHaJ3&w=216&h=288&c=8&rs=1&qlt=90&o=6&dpr=1.4&pid=3.1&rm=2');\r\n}\r\n\r\n@media (prefers-color-scheme: dark) {\r\n\t/deep/.van-popup{\r\n\t\tbackground-color: #000;\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./schdeuel.vue?vue&type=style&index=0&id=e06c2434&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../D下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./schdeuel.vue?vue&type=style&index=0&id=e06c2434&lang=scss&scoped=true&\""],"sourceRoot":""}